{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nlet page = 1;\nlet perPage = 15;\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst API_KEY = '45132355-1a938d4dc3b6908ed12965e8f';\n\nconst receiveDataFromServer = async (requestItem, reset = false) => {\n  if (reset) {\n    page = 1;\n  }\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: requestItem,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  });\n\n  const response = await axios.get(`?${searchParams}`);\n\n  page += 1;\n\n  return response.data;\n};\n\nexport default receiveDataFromServer;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// create gallery elements\nconst renderFunc = dataArray => {\n  const itemsArr = dataArray\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class= \"list-item\">\n    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" class=\"list-img\"></a>\n <ul class = \"content-list\">\n <li class=\"content-list-item\">\n <p class=\"content-list-title\">Likes</p>\n <p class=\"content-list-value\">${likes}</p>\n </li>\n <li class=\"content-list-item\">\n <p class=\"content-list-title\">Views</p>\n <p class=\"content-list-value\">${views}</p>\n </li>\n <li class=\"content-list-item\">\n <p class=\"content-list-title\">Comments</p>\n <p class=\"content-list-value\">${comments}</p>\n </li>\n <li class=\"content-list-item\">\n <p class=\"content-list-title\">Downloads</p>\n <p class=\"content-list-value\">${downloads}</p>\n </li>\n </ul>\n    </li>\n    `\n    )\n    .join(' ');\n\n  return itemsArr;\n};\n\n// lightbox initialization\nvar lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport { renderFunc, lightbox };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport receiveDataFromServer from './js/pixabay-api';\nimport { renderFunc, lightbox } from './js/render-function';\n\nconst form = document.querySelector('.form');\nconst inputValue = form.elements.information;\nconst gallery = document.querySelector('.gallery');\nconst button = document.querySelector('.button.position');\nconst loader = document.querySelector('.loader');\nconst loadMoreLoader = document.querySelector('.load-more');\n\nlet currentInputValue = '';\n\nconst drawDataFromServer = async event => {\n  event.preventDefault();\n\n  currentInputValue = inputValue.value;\n\n  loader.classList.remove('visually-hidden');\n\n  try {\n    const data = await receiveDataFromServer(currentInputValue, true);\n\n    if (data.total === 0) {\n      button.classList.add('visually-hidden');\n      gallery.innerHTML = '';\n      return iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n\n    gallery.innerHTML = '';\n    const itemsArr = renderFunc(data.hits);\n    gallery.insertAdjacentHTML('afterbegin', itemsArr);\n\n    lightbox.refresh();\n\n    button.classList.remove('visually-hidden');\n  } catch (error) {\n    gallery.innerHTML = '';\n    console.log(error);\n  } finally {\n    loader.classList.add('visually-hidden');\n    form.reset();\n  }\n};\n\nconst loadMoreContent = async () => {\n  button.disabled = true;\n  loadMoreLoader.classList.remove('visually-hidden');\n\n  try {\n    const data = await receiveDataFromServer(currentInputValue);\n\n    loadMoreLoader.classList.add('visually-hidden');\n\n    const itemsArr = renderFunc(data.hits);\n    gallery.insertAdjacentHTML('beforeend', itemsArr);\n\n    lightbox.refresh();\n\n    if (data.totalHits - gallery.childElementCount <= 0) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n\n      button.classList.add('visually-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    button.disabled = false;\n  }\n};\n\nbutton.addEventListener('click', loadMoreContent);\n\nform.addEventListener('submit', drawDataFromServer);\n"],"names":["page","perPage","axios","API_KEY","receiveDataFromServer","requestItem","reset","searchParams","response","renderFunc","dataArray","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","form","inputValue","gallery","button","loader","loadMoreLoader","currentInputValue","drawDataFromServer","event","data","iziToast","itemsArr","error","loadMoreContent"],"mappings":"+vBAEA,IAAIA,EAAO,EACPC,EAAU,GAEdC,EAAM,SAAS,QAAU,2BAEzB,MAAMC,EAAU,qCAEVC,EAAwB,MAAOC,EAAaC,EAAQ,KAAU,CAC9DA,IACFN,EAAO,GAET,MAAMO,EAAe,IAAI,gBAAgB,CACvC,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAL,EACA,SAAUC,CACd,CAAG,EAEKO,EAAW,MAAMN,EAAM,IAAI,IAAIK,CAAY,EAAE,EAEnD,OAAAP,GAAQ,EAEDQ,EAAS,IAClB,ECxBMC,EAAaC,GACAA,EACd,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,eAEGL,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,iCAIpCC,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,iCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,KAKrC,EACA,KAAK,GAAG,EAMb,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EC1CD,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAaD,EAAK,SAAS,YAC3BE,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,kBAAkB,EAClDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIC,EAAoB,GAExB,MAAMC,EAAqB,MAAMC,GAAS,CACxCA,EAAM,eAAc,EAEpBF,EAAoBL,EAAW,MAE/BG,EAAO,UAAU,OAAO,iBAAiB,EAEzC,GAAI,CACF,MAAMK,EAAO,MAAMzB,EAAsBsB,EAAmB,EAAI,EAEhE,GAAIG,EAAK,QAAU,EACjB,OAAAN,EAAO,UAAU,IAAI,iBAAiB,EACtCD,EAAQ,UAAY,GACbQ,EAAS,MAAM,CACpB,QACE,2EACF,SAAU,UAClB,CAAO,EAGHR,EAAQ,UAAY,GACpB,MAAMS,EAAWtB,EAAWoB,EAAK,IAAI,EACrCP,EAAQ,mBAAmB,aAAcS,CAAQ,EAEjDb,EAAS,QAAO,EAEhBK,EAAO,UAAU,OAAO,iBAAiB,CAC1C,OAAQS,EAAO,CACdV,EAAQ,UAAY,GACpB,QAAQ,IAAIU,CAAK,CACrB,QAAY,CACRR,EAAO,UAAU,IAAI,iBAAiB,EACtCJ,EAAK,MAAK,CACX,CACH,EAEMa,EAAkB,SAAY,CAClCV,EAAO,SAAW,GAClBE,EAAe,UAAU,OAAO,iBAAiB,EAEjD,GAAI,CACF,MAAMI,EAAO,MAAMzB,EAAsBsB,CAAiB,EAE1DD,EAAe,UAAU,IAAI,iBAAiB,EAE9C,MAAMM,EAAWtB,EAAWoB,EAAK,IAAI,EACrCP,EAAQ,mBAAmB,YAAaS,CAAQ,EAEhDb,EAAS,QAAO,EAEZW,EAAK,UAAYP,EAAQ,mBAAqB,IAChDQ,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,EAEDP,EAAO,UAAU,IAAI,iBAAiB,EAEzC,OAAQS,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRT,EAAO,SAAW,EACnB,CACH,EAEAA,EAAO,iBAAiB,QAASU,CAAe,EAEhDb,EAAK,iBAAiB,SAAUO,CAAkB"}